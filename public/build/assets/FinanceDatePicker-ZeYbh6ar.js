import{h as i,r as $,k as j,c as a,g as h,b as l,f as v,t as g,F as b,p as x,o as s,u as K,n as L}from"./app-DBmEpP_-.js";import{d as c}from"./dayjs.min-Z4LNoRjb.js";import{l as T}from"./localeData-DZQ_ORQ7.js";import"./en-B63u2pIa.js";import{u as E}from"./useFinanceFormat-CB7TYyOT.js";const I={key:0,class:"w-full sm:w-[320px]"},J={class:"relative z-50 bg-white rounded-3xl shadow-xl border border-slate-100 p-5 animate-in fade-in zoom-in-95 duration-200"},N={class:"flex items-center justify-between mb-4"},O={class:"font-bold text-slate-700 capitalize"},R={class:"grid grid-cols-7 mb-2 text-center"},A={class:"grid grid-cols-7 gap-1"},H=["onClick","title"],P={class:"text-sm font-bold leading-none"},W={key:0,class:"mt-1 flex gap-0.5"},q={key:0,class:"w-1.5 h-1.5 rounded-full bg-emerald-400 shadow-sm"},G={key:1,class:"w-1.5 h-1.5 rounded-full bg-rose-400 shadow-sm"},Q={key:2,class:"w-1.5 h-1.5 rounded-full bg-slate-300"},U={key:1,class:"absolute -top-1 -right-1 flex h-2 w-2"},oe={__name:"FinanceDatePicker",props:{modelValue:String,transactions:{type:Array,default:()=>[]},show:Boolean,close:Function},emits:["update:modelValue","close"],setup(Y,{emit:k}){c.extend(T);const u=Y,m=k,{appLocale:f,formatMoney:w}=E(),M=i(()=>!f||!f.value?"id":f.value.split("-")[0]),D=i(()=>{const t={};return u.transactions.forEach(o=>{const e=c(o.date).format("YYYY-MM-DD");t[e]||(t[e]={income:0,expense:0,net:0,count:0});const d=Number(o.amount);o.type==="income"?(t[e].income+=d,t[e].net+=d):(t[e].expense+=d,t[e].net-=d),t[e].count++}),t}),r=t=>{const o=n.value.date(t).format("YYYY-MM-DD");return D.value[o]},y=i(()=>{try{const t=c().locale(M.value);return typeof t.localeData!="function"?["Min","Sen","Sel","Rab","Kam","Jum","Sab"]:t.localeData().weekdaysShort()}catch{return["Min","Sen","Sel","Rab","Kam","Jum","Sab"]}}),n=$(c(u.modelValue||void 0));j(()=>u.modelValue,t=>{t&&(n.value=c(t))});const S=i(()=>n.value.daysInMonth()),V=i(()=>n.value.startOf("month").day()),C=i(()=>{try{return n.value.locale(M.value).format("MMMM YYYY")}catch{return n.value.format("MMMM YYYY")}}),F=()=>n.value=n.value.subtract(1,"month"),z=()=>n.value=n.value.add(1,"month"),B=t=>{const o=n.value.date(t).format("YYYY-MM-DD");m("update:modelValue",o),m("close")},p=t=>u.modelValue?u.modelValue===n.value.date(t).format("YYYY-MM-DD"):!1,_=t=>c().format("YYYY-MM-DD")===n.value.date(t).format("YYYY-MM-DD");return(t,o)=>Y.show?(s(),a("div",I,[l("div",{class:"fixed inset-0 z-40",onClick:o[0]||(o[0]=e=>m("close"))}),l("div",J,[l("div",N,[l("button",{onClick:v(F,["prevent"]),class:"p-2 rounded-xl hover:bg-slate-50 text-slate-400 hover:text-indigo-600 transition"},"â—€"),l("h4",O,g(C.value),1),l("button",{onClick:v(z,["prevent"]),class:"p-2 rounded-xl hover:bg-slate-50 text-slate-400 hover:text-indigo-600 transition"},"â–¶")]),l("div",R,[(s(!0),a(b,null,x(y.value,e=>(s(),a("span",{key:e,class:"text-[10px] font-bold text-slate-400 uppercase"},g(e),1))),128))]),l("div",A,[(s(!0),a(b,null,x(V.value,e=>(s(),a("div",{key:"blank-"+e}))),128)),(s(!0),a(b,null,x(S.value,e=>(s(),a("button",{key:e,onClick:v(d=>B(e),["prevent"]),class:L(["h-9 w-9 rounded-xl flex flex-col items-center justify-center transition-all relative group",[p(e)?"bg-indigo-600 text-white shadow-lg shadow-indigo-200":"text-slate-600 hover:bg-slate-50 hover:text-indigo-600",_(e)&&!p(e)?"ring-1 ring-indigo-200 bg-indigo-50/50":""]]),title:r(e)?`${K(w)(r(e).net)} (${r(e).count} Trx)`:"Tidak ada transaksi"},[l("span",P,g(e),1),r(e)?(s(),a("div",W,[r(e).net>0?(s(),a("span",q)):r(e).net<0?(s(),a("span",G)):(s(),a("span",Q))])):h("",!0),_(e)&&!p(e)?(s(),a("span",U,[...o[1]||(o[1]=[l("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75"},null,-1),l("span",{class:"relative inline-flex rounded-full h-2 w-2 bg-indigo-500"},null,-1)])])):h("",!0)],10,H))),128))])])])):h("",!0)}};export{oe as default};
