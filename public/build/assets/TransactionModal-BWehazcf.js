import{s as D,k as V,a as d,n as f,d as t,e as a,m as B,y as u,p as y,B as j,q as c,J as M,F as z,A as F,b as h,r as S,w as U,o as r,z as N,C as R}from"./vendor-vue-BpYG_UOO.js";import{d as Y}from"./vendor-core-Dt3pqkYV.js";import{u as E}from"./useFinanceFormat-CCXEDe6t.js";import I from"./FinanceDatePicker-CeoeQ8os.js";import"./vendor-inertia-CzGZ5YH6.js";import"./vendor-utils-2VVJO3Sv.js";const T={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-4"},A={class:"bg-white w-full max-w-md rounded-[2rem] shadow-2xl z-10 p-6 animate-in zoom-in-95 duration-200 border border-slate-100 relative overflow-visible"},P={class:"flex justify-between items-center mb-6"},J={class:"text-xl font-black text-slate-800"},L={class:"flex bg-slate-100 p-1.5 rounded-2xl"},q={class:"block text-[10px] uppercase font-bold text-slate-400 tracking-widest mb-1.5"},G=["placeholder"],O={class:"block text-[10px] uppercase font-bold text-slate-400 tracking-widest mb-1.5"},H={class:"relative group"},K={class:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold"},Q=["value"],W={class:"grid grid-cols-2 gap-4"},X={class:"block text-[10px] uppercase font-bold text-slate-400 tracking-widest mb-1.5"},Z={class:"relative"},_={value:"",disabled:"",selected:""},ee=["value"],te={key:0,class:"text-[9px] text-rose-500 mt-1"},se={class:"relative"},oe={class:"block text-[10px] uppercase font-bold text-slate-400 tracking-widest mb-1.5"},le={class:"truncate"},ae={key:0,class:"absolute bottom-full right-0 mb-2 z-50 shadow-2xl rounded-3xl origin-bottom-right"},ne={class:"flex gap-3 pt-4"},fe={__name:"TransactionModal",props:{show:Boolean,form:Object,budgets:Array,categories:Array,close:Function,submit:Function},setup(l){const n=l,{activeCurrency:m,getCategoryDetails:w,appLocale:b}=E(),i=S(!1),p=c(()=>n.form.type==="income"?n.categories.filter(s=>s.type==="income").map(s=>s.slug):n.budgets.map(e=>e.category)),g=s=>w(s,n.categories);D(()=>n.form.type,()=>{n.form.category=""});const x=c(()=>["IDR","EUR","de-DE"].includes(m.value)),v=c(()=>({IDR:"Rp",USD:"$",GBP:"Â£",EUR:"â‚¬",JPY:"Â¥"})[m.value]||m.value),k=c(()=>{if(!n.form.date)return"";const s=b.value?b.value.split("-")[0]:"id";return Y(n.form.date).locale(s).format("dddd, DD MMMM YYYY")}),$=s=>{if(!s)return"";const e=s.toString();return x.value?e.replace(/\B(?=(\d{3})+(?!\d))/g,"."):e.replace(/\B(?=(\d{3})+(?!\d))/g,",")},C=s=>{let e=s.target.value,o;x.value?o=e.replace(/\./g,""):o=e.replace(/,/g,""),isNaN(o)||(n.form.amount=o)};return(s,e)=>(r(),V(R,{to:"body"},[l.show?(r(),d("div",T,[t("div",{onClick:e[0]||(e[0]=(...o)=>l.close&&l.close(...o)),class:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity"}),t("div",A,[t("div",P,[t("h3",J,"âœ¨ "+a(s.$t("record_transaction")),1),t("button",{onClick:e[1]||(e[1]=(...o)=>l.close&&l.close(...o)),class:"bg-slate-50 p-2 rounded-full text-slate-400 hover:bg-slate-100 hover:text-slate-600 transition"},"âœ•")]),t("form",{onSubmit:e[10]||(e[10]=B((...o)=>l.submit&&l.submit(...o),["prevent"])),class:"space-y-5"},[t("div",L,[t("button",{type:"button",onClick:e[2]||(e[2]=o=>n.form.type="expense"),class:u(["flex-1 py-2.5 rounded-xl text-sm font-bold transition-all flex items-center justify-center gap-2",n.form.type==="expense"?"bg-white text-rose-600 shadow-sm":"text-slate-400 hover:text-slate-600"])}," ðŸ’¸ "+a(s.$t("expense")),3),t("button",{type:"button",onClick:e[3]||(e[3]=o=>n.form.type="income"),class:u(["flex-1 py-2.5 rounded-xl text-sm font-bold transition-all flex items-center justify-center gap-2",n.form.type==="income"?"bg-white text-emerald-600 shadow-sm":"text-slate-400 hover:text-slate-600"])}," ðŸ’° "+a(s.$t("income")),3)]),t("div",null,[t("label",q,a(s.$t("description")),1),y(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>l.form.title=o),type:"text",placeholder:s.$t("desc_placeholder"),class:"w-full px-4 py-3.5 rounded-2xl bg-slate-50 border-none focus:ring-2 focus:ring-indigo-500 font-bold text-slate-700 placeholder:text-slate-300 transition-all"},null,8,G),[[j,l.form.title]])]),t("div",null,[t("label",O,a(s.$t("amount"))+" ("+a(v.value)+")",1),t("div",H,[t("span",K,a(v.value),1),t("input",{type:"text",value:$(l.form.amount),onInput:C,placeholder:"0",class:"w-full pl-12 pr-4 py-3.5 rounded-2xl bg-slate-50 border-none focus:ring-2 focus:ring-indigo-500 font-black text-lg text-slate-700 placeholder:text-slate-300 transition-all"},null,40,Q)])]),t("div",W,[t("div",null,[t("label",X,a(s.$t("category")),1),t("div",Z,[y(t("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>l.form.category=o),class:"w-full pl-4 pr-8 py-3.5 rounded-2xl bg-slate-50 border-none focus:ring-2 focus:ring-indigo-500 font-bold text-slate-700 capitalize text-sm appearance-none cursor-pointer hover:bg-slate-50"},[t("option",_,a(s.$t("select_placeholder")),1),(r(!0),d(z,null,F(p.value,o=>(r(),d("option",{key:o,value:o},a(g(o).icon)+" "+a(g(o).name),9,ee))),128))],512),[[M,l.form.category]]),e[11]||(e[11]=t("div",{class:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400"},"â–¼",-1))]),l.form.type==="expense"&&p.value.length===0?(r(),d("p",te,a(s.$t("create_budget_first")),1)):f("",!0)]),t("div",se,[t("label",oe,a(s.$t("date")),1),t("button",{type:"button",onClick:e[6]||(e[6]=o=>i.value=!i.value),class:u(["w-full px-4 py-3.5 rounded-2xl bg-slate-50 hover:bg-slate-100 text-left font-bold text-slate-700 text-sm transition-all flex items-center justify-between",i.value?"ring-2 ring-indigo-500 bg-white":""])},[t("span",le,a(k.value),1),e[12]||(e[12]=t("span",{class:"text-slate-400 text-xs"},"ðŸ“…",-1))],2),h(N,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:U(()=>[i.value?(r(),d("div",ae,[h(I,{show:!0,modelValue:l.form.date,"onUpdate:modelValue":e[7]||(e[7]=o=>l.form.date=o),onClose:e[8]||(e[8]=o=>i.value=!1)},null,8,["modelValue"])])):f("",!0)]),_:1})])]),t("div",ne,[t("button",{type:"button",onClick:e[9]||(e[9]=(...o)=>l.close&&l.close(...o)),class:"flex-1 py-3.5 text-slate-500 font-bold hover:bg-slate-50 rounded-2xl transition"},a(s.$t("btn_cancel")),1),t("button",{type:"submit",class:u(["flex-[2] py-3.5 text-white font-bold rounded-2xl shadow-lg active:scale-95 transition-all flex justify-center items-center gap-2",l.form.type==="expense"?"bg-rose-500 hover:bg-rose-600 shadow-rose-200":"bg-emerald-500 hover:bg-emerald-600 shadow-emerald-200"])},a(s.$t("btn_save")),3)])],32)])])):f("",!0)]))}};export{fe as default};
