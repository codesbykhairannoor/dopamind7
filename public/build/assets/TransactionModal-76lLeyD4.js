import{q as D,k as B,a as d,m as f,d as t,e as a,l as V,x as c,n as v,A as j,p as u,G as M,F as z,z as F,b as y,r as S,w as U,o as i,y as E,B as N}from"./vendor-vue-BnW7Nrl4.js";import{d as R}from"./vendor-core-CzOEOszY.js";import{u as T}from"./useFinanceFormat-BzdLqOPi.js";import Y from"./FinanceDatePicker--Rd7IAaB.js";import"./vendor-inertia-DLGDmWoM.js";import"./vendor-utils-vWQA-h1x.js";const I={key:0,class:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center p-4"},A={class:"bg-white w-full max-w-md rounded-[2rem] shadow-2xl z-10 p-6 animate-in slide-in-from-bottom-10 sm:zoom-in-95 duration-200 border border-slate-100 relative overflow-visible"},P={class:"flex justify-between items-center mb-6"},G={class:"flex items-center gap-3"},L={class:"text-xl font-black text-slate-800"},q={class:"flex items-center gap-2"},J={class:"flex bg-slate-100 p-1.5 rounded-2xl"},O={class:"block text-[10px] uppercase font-bold text-slate-400 tracking-widest mb-1.5"},H=["placeholder"],K={class:"block text-[10px] uppercase font-bold text-slate-400 tracking-widest mb-1.5"},Q={class:"relative group"},W={class:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold"},X=["value"],Z={class:"flex flex-col sm:grid sm:grid-cols-2 gap-4"},_={class:"w-full"},ee={class:"block text-[10px] uppercase font-bold text-slate-400 tracking-widest mb-1.5"},te={class:"relative"},se={value:"",disabled:"",selected:""},oe=["value"],le={class:"relative w-full"},ae={class:"block text-[10px] uppercase font-bold text-slate-400 tracking-widest mb-1.5"},ne={class:"truncate"},ie={key:0,class:"absolute bottom-full right-0 sm:right-0 mb-2 z-50 shadow-2xl rounded-3xl origin-bottom sm:origin-bottom-right"},re={class:"flex gap-3 pt-4"},de=["disabled"],xe={__name:"TransactionModal",props:{show:Boolean,form:Object,budgets:Array,categories:Array,close:Function,submit:Function},emits:["switch-to-batch"],setup(l,{emit:ce}){const n=l,{activeCurrency:m,getCategoryDetails:h,appLocale:b}=T(),r=S(!1),w=u(()=>n.form.type==="income"?n.categories.filter(o=>o.type==="income").map(o=>o.slug):n.budgets.map(e=>e.category)),p=o=>h(o,n.categories);D(()=>n.form.type,()=>{n.form.category=""});const g=u(()=>["IDR","EUR","de-DE"].includes(m.value)),x=u(()=>({IDR:"Rp",USD:"$",GBP:"Â£",EUR:"â‚¬",JPY:"Â¥"})[m.value]||m.value),k=u(()=>{if(!n.form.date)return"";const o=b.value?b.value.split("-")[0]:"id";return R(n.form.date).locale(o).format("dddd, DD MMMM YYYY")}),$=o=>{if(!o)return"";const e=o.toString();return g.value?e.replace(/\B(?=(\d{3})+(?!\d))/g,"."):e.replace(/\B(?=(\d{3})+(?!\d))/g,",")},C=o=>{let e=o.target.value,s;g.value?s=e.replace(/\./g,""):s=e.replace(/,/g,""),isNaN(s)||(n.form.amount=s)};return(o,e)=>(i(),B(N,{to:"body"},[l.show?(i(),d("div",I,[t("div",{onClick:e[0]||(e[0]=(...s)=>l.close&&l.close(...s)),class:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity"}),t("div",A,[t("div",P,[t("div",G,[t("h3",L," âœ¨ "+a(l.form.id?"Edit Transaction":o.$t("record_transaction")),1)]),t("div",q,[l.form.id?f("",!0):(i(),d("button",{key:0,onClick:e[1]||(e[1]=s=>o.$emit("switch-to-batch")),type:"button",class:"text-[10px] font-black uppercase tracking-widest px-3 py-1.5 rounded-lg bg-indigo-50 text-indigo-600 border border-indigo-100 hover:bg-indigo-100 transition flex items-center gap-1 active:scale-95"}," Batch ")),t("button",{onClick:e[2]||(e[2]=(...s)=>l.close&&l.close(...s)),class:"bg-slate-50 w-8 h-8 flex items-center justify-center rounded-full text-slate-400 hover:bg-rose-50 hover:text-rose-500 transition font-bold"},"âœ•")])]),t("form",{onSubmit:e[11]||(e[11]=V((...s)=>l.submit&&l.submit(...s),["prevent"])),class:"space-y-5"},[t("div",J,[t("button",{type:"button",onClick:e[3]||(e[3]=s=>n.form.type="expense"),class:c(["flex-1 py-2.5 rounded-xl text-sm font-bold transition-all flex items-center justify-center gap-2",n.form.type==="expense"?"bg-white text-rose-600 shadow-sm":"text-slate-400 hover:text-slate-600"])}," ðŸ’¸ "+a(o.$t("expense")),3),t("button",{type:"button",onClick:e[4]||(e[4]=s=>n.form.type="income"),class:c(["flex-1 py-2.5 rounded-xl text-sm font-bold transition-all flex items-center justify-center gap-2",n.form.type==="income"?"bg-white text-emerald-600 shadow-sm":"text-slate-400 hover:text-slate-600"])}," ðŸ’° "+a(o.$t("income")),3)]),t("div",null,[t("label",O,a(o.$t("description")),1),v(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>l.form.title=s),type:"text",placeholder:o.$t("desc_placeholder"),class:"w-full px-4 py-3.5 rounded-2xl bg-slate-50 border-none focus:ring-2 focus:ring-indigo-500 font-bold text-slate-700 placeholder:text-slate-300 transition-all"},null,8,H),[[j,l.form.title]])]),t("div",null,[t("label",K,a(o.$t("amount"))+" ("+a(x.value)+")",1),t("div",Q,[t("span",W,a(x.value),1),t("input",{type:"text",value:$(l.form.amount),onInput:C,placeholder:"0",class:"w-full pl-12 pr-4 py-3.5 rounded-2xl bg-slate-50 border-none focus:ring-2 focus:ring-indigo-500 font-black text-lg text-slate-700 placeholder:text-slate-300 transition-all"},null,40,X)])]),t("div",Z,[t("div",_,[t("label",ee,a(o.$t("category")),1),t("div",te,[v(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>l.form.category=s),class:"w-full pl-4 pr-8 py-3.5 rounded-2xl bg-slate-50 border-none focus:ring-2 focus:ring-indigo-500 font-bold text-slate-700 capitalize text-sm appearance-none cursor-pointer hover:bg-slate-50"},[t("option",se,a(o.$t("select_placeholder")),1),(i(!0),d(z,null,F(w.value,s=>(i(),d("option",{key:s,value:s},a(p(s).icon)+" "+a(p(s).name),9,oe))),128))],512),[[M,l.form.category]]),e[12]||(e[12]=t("div",{class:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400"},"â–¼",-1))])]),t("div",le,[t("label",ae,a(o.$t("date")),1),t("button",{type:"button",onClick:e[7]||(e[7]=s=>r.value=!r.value),class:c(["w-full px-4 py-3.5 rounded-2xl bg-slate-50 hover:bg-slate-100 text-left font-bold text-slate-700 text-sm transition-all flex items-center justify-between",r.value?"ring-2 ring-indigo-500 bg-white":""])},[t("span",ne,a(k.value),1),e[13]||(e[13]=t("span",{class:"text-slate-400 text-xs"},"ðŸ“…",-1))],2),y(E,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:U(()=>[r.value?(i(),d("div",ie,[y(Y,{show:!0,modelValue:l.form.date,"onUpdate:modelValue":e[8]||(e[8]=s=>l.form.date=s),onClose:e[9]||(e[9]=s=>r.value=!1)},null,8,["modelValue"])])):f("",!0)]),_:1})])]),t("div",re,[t("button",{type:"button",onClick:e[10]||(e[10]=(...s)=>l.close&&l.close(...s)),class:"flex-1 py-3.5 text-slate-500 font-bold hover:bg-slate-50 rounded-2xl transition"},a(o.$t("btn_cancel")),1),t("button",{type:"submit",disabled:l.form.processing,class:c(["flex-[2] py-3.5 text-white font-bold rounded-2xl shadow-lg active:scale-95 transition-all flex justify-center items-center gap-2 disabled:opacity-50",l.form.type==="expense"?"bg-rose-500 hover:bg-rose-600 shadow-rose-200":"bg-emerald-500 hover:bg-emerald-600 shadow-emerald-200"])},a(l.form.processing?"...":o.$t("btn_save")),11,de)])],32)])])):f("",!0)]))}};export{xe as default};
