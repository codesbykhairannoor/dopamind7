import{a as N}from"./vendor-utils-8hC8U92q.js";import{l as $,o as J,N as u}from"./vendor-core-Be3KM5vE.js";function q(e,t){let r;return function(...i){clearTimeout(r),r=setTimeout(()=>e.apply(this,i),t)}}function m(e,t){return document.dispatchEvent(new CustomEvent(`inertia:${e}`,t))}var K=e=>m("before",{cancelable:!0,detail:{visit:e}}),U=e=>m("error",{detail:{errors:e}}),_=e=>m("exception",{cancelable:!0,detail:{exception:e}}),M=e=>m("finish",{detail:{visit:e}}),Q=e=>m("invalid",{cancelable:!0,detail:{response:e}}),x=e=>m("navigate",{detail:{page:e}}),Y=e=>m("progress",{detail:{progress:e}}),Z=e=>m("start",{detail:{visit:e}}),G=e=>m("success",{detail:{page:e}});function O(e){return e instanceof File||e instanceof Blob||e instanceof FileList&&e.length>0||e instanceof FormData&&Array.from(e.values()).some(t=>O(t))||typeof e=="object"&&e!==null&&Object.values(e).some(t=>O(t))}function W(e,t=new FormData,r=null){e=e||{};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&H(t,X(r,i),e[i]);return t}function X(e,t){return e?e+"["+t+"]":t}function H(e,t,r){if(Array.isArray(r))return Array.from(r.keys()).forEach(i=>H(e,X(t,i.toString()),r[i]));if(r instanceof Date)return e.append(t,r.toISOString());if(r instanceof File)return e.append(t,r,r.name);if(r instanceof Blob)return e.append(t,r);if(typeof r=="boolean")return e.append(t,r?"1":"0");if(typeof r=="string")return e.append(t,r);if(typeof r=="number")return e.append(t,`${r}`);if(r==null)return e.append(t,"");W(r,e,t)}var ee={modal:null,listener:null,show(e){typeof e=="object"&&(e=`All Inertia requests must receive a valid Inertia response, however a plain JSON response was received.<hr>${JSON.stringify(e)}`);let t=document.createElement("html");t.innerHTML=e,t.querySelectorAll("a").forEach(i=>i.setAttribute("target","_top")),this.modal=document.createElement("div"),this.modal.style.position="fixed",this.modal.style.width="100vw",this.modal.style.height="100vh",this.modal.style.padding="50px",this.modal.style.boxSizing="border-box",this.modal.style.backgroundColor="rgba(0, 0, 0, .6)",this.modal.style.zIndex=2e5,this.modal.addEventListener("click",()=>this.hide());let r=document.createElement("iframe");if(r.style.backgroundColor="white",r.style.borderRadius="5px",r.style.width="100%",r.style.height="100%",this.modal.appendChild(r),document.body.prepend(this.modal),document.body.style.overflow="hidden",!r.contentWindow)throw new Error("iframe not yet ready.");r.contentWindow.document.open(),r.contentWindow.document.write(t.outerHTML),r.contentWindow.document.close(),this.listener=this.hideOnEscape.bind(this),document.addEventListener("keydown",this.listener)},hide(){this.modal.outerHTML="",this.modal=null,document.body.style.overflow="visible",document.removeEventListener("keydown",this.listener)},hideOnEscape(e){e.keyCode===27&&this.hide()}};function b(e){return new URL(e.toString(),window.location.toString())}function te(e,t,r,i="brackets"){let o=/^https?:\/\//.test(t.toString()),c=o||t.toString().startsWith("/"),p=!c&&!t.toString().startsWith("#")&&!t.toString().startsWith("?"),f=t.toString().includes("?")||e==="get"&&Object.keys(r).length,v=t.toString().includes("#"),a=new URL(t.toString(),"http://localhost");return e==="get"&&Object.keys(r).length&&(a.search=$.stringify(J($.parse(a.search,{ignoreQueryPrefix:!0}),r),{encodeValuesOnly:!0,arrayFormat:i}),r={}),[[o?`${a.protocol}//${a.host}`:"",c?a.pathname:"",p?a.pathname.substring(1):"",f?a.search:"",v?a.hash:""].join(""),r]}function P(e){return e=new URL(e.href),e.hash="",e}var k=typeof window>"u",B=!k&&/CriOS/.test(window.navigator.userAgent),D=e=>{requestAnimationFrame(()=>{requestAnimationFrame(e)})},re=class{constructor(){this.visitId=null}init({initialPage:e,resolveComponent:t,swapComponent:r}){this.page=e,this.resolveComponent=t,this.swapComponent=r,this.setNavigationType(),this.clearRememberedStateOnReload(),this.isBackForwardVisit()?this.handleBackForwardVisit(this.page):this.isLocationVisit()?this.handleLocationVisit(this.page):this.handleInitialPageVisit(this.page),this.setupEventListeners()}setNavigationType(){this.navigationType=window.performance&&window.performance.getEntriesByType&&window.performance.getEntriesByType("navigation").length>0?window.performance.getEntriesByType("navigation")[0].type:"navigate"}clearRememberedStateOnReload(){var e;this.navigationType==="reload"&&((e=window.history.state)!=null&&e.rememberedState)&&delete window.history.state.rememberedState}handleInitialPageVisit(e){let t=window.location.hash;this.page.url.includes(t)||(this.page.url+=t),this.setPage(e,{preserveScroll:!0,preserveState:!0}).then(()=>x(e))}setupEventListeners(){window.addEventListener("popstate",this.handlePopstateEvent.bind(this)),document.addEventListener("scroll",q(this.handleScrollEvent.bind(this),100),!0)}scrollRegions(){return document.querySelectorAll("[scroll-region]")}handleScrollEvent(e){typeof e.target.hasAttribute=="function"&&e.target.hasAttribute("scroll-region")&&this.saveScrollPositions()}saveScrollPositions(){this.replaceState({...this.page,scrollRegions:Array.from(this.scrollRegions()).map(e=>({top:e.scrollTop,left:e.scrollLeft}))})}resetScrollPositions(){D(()=>{var e;window.scrollTo(0,0),this.scrollRegions().forEach(t=>{typeof t.scrollTo=="function"?t.scrollTo(0,0):(t.scrollTop=0,t.scrollLeft=0)}),this.saveScrollPositions(),window.location.hash&&((e=document.getElementById(window.location.hash.slice(1)))==null||e.scrollIntoView())})}restoreScrollPositions(){D(()=>{this.page.scrollRegions&&this.scrollRegions().forEach((e,t)=>{let r=this.page.scrollRegions[t];if(r)typeof e.scrollTo=="function"?e.scrollTo(r.left,r.top):(e.scrollTop=r.top,e.scrollLeft=r.left);else return})})}isBackForwardVisit(){return window.history.state&&this.navigationType==="back_forward"}handleBackForwardVisit(e){window.history.state.version=e.version,this.setPage(window.history.state,{preserveScroll:!0,preserveState:!0}).then(()=>{this.restoreScrollPositions(),x(e)})}locationVisit(e,t){try{let r={preserveScroll:t};window.sessionStorage.setItem("inertiaLocationVisit",JSON.stringify(r)),window.location.href=e.href,P(window.location).href===P(e).href&&window.location.reload()}catch{return!1}}isLocationVisit(){try{return window.sessionStorage.getItem("inertiaLocationVisit")!==null}catch{return!1}}handleLocationVisit(e){var r,i;let t=JSON.parse(window.sessionStorage.getItem("inertiaLocationVisit")||"");window.sessionStorage.removeItem("inertiaLocationVisit"),e.url+=window.location.hash,e.rememberedState=((r=window.history.state)==null?void 0:r.rememberedState)??{},e.scrollRegions=((i=window.history.state)==null?void 0:i.scrollRegions)??[],this.setPage(e,{preserveScroll:t.preserveScroll,preserveState:!0}).then(()=>{t.preserveScroll&&this.restoreScrollPositions(),x(e)})}isLocationVisitResponse(e){return!!(e&&e.status===409&&e.headers["x-inertia-location"])}isInertiaResponse(e){return!!(e!=null&&e.headers["x-inertia"])}createVisitId(){return this.visitId={},this.visitId}cancelVisit(e,{cancelled:t=!1,interrupted:r=!1}){e&&!e.completed&&!e.cancelled&&!e.interrupted&&(e.cancelToken.abort(),e.onCancel(),e.completed=!1,e.cancelled=t,e.interrupted=r,M(e),e.onFinish(e))}finishVisit(e){!e.cancelled&&!e.interrupted&&(e.completed=!0,e.cancelled=!1,e.interrupted=!1,M(e),e.onFinish(e))}resolvePreserveOption(e,t){return typeof e=="function"?e(t):e==="errors"?Object.keys(t.props.errors||{}).length>0:e}cancel(){this.activeVisit&&this.cancelVisit(this.activeVisit,{cancelled:!0})}visit(e,{method:t="get",data:r={},replace:i=!1,preserveScroll:o=!1,preserveState:c=!1,only:p=[],except:f=[],headers:v={},errorBag:a="",forceFormData:l=!1,onCancelToken:g=()=>{},onBefore:V=()=>{},onStart:d=()=>{},onProgress:h=()=>{},onFinish:I=()=>{},onCancel:y=()=>{},onSuccess:C=()=>{},onError:R=()=>{},queryStringArrayFormat:T="brackets"}={}){let S=typeof e=="string"?b(e):e;if((O(r)||l)&&!(r instanceof FormData)&&(r=W(r)),!(r instanceof FormData)){let[n,s]=te(t,S,r,T);S=b(n),r=s}let E={url:S,method:t,data:r,replace:i,preserveScroll:o,preserveState:c,only:p,except:f,headers:v,errorBag:a,forceFormData:l,queryStringArrayFormat:T,cancelled:!1,completed:!1,interrupted:!1};if(V(E)===!1||!K(E))return;this.activeVisit&&this.cancelVisit(this.activeVisit,{interrupted:!0}),this.saveScrollPositions();let F=this.createVisitId();this.activeVisit={...E,onCancelToken:g,onBefore:V,onStart:d,onProgress:h,onFinish:I,onCancel:y,onSuccess:C,onError:R,queryStringArrayFormat:T,cancelToken:new AbortController},g({cancel:()=>{this.activeVisit&&this.cancelVisit(this.activeVisit,{cancelled:!0})}}),Z(E),d(E);let A=!!(p.length||f.length);N({method:t,url:P(S).href,data:t==="get"?{}:r,params:t==="get"?r:{},signal:this.activeVisit.cancelToken.signal,headers:{...v,Accept:"text/html, application/xhtml+xml","X-Requested-With":"XMLHttpRequest","X-Inertia":!0,...A?{"X-Inertia-Partial-Component":this.page.component}:{},...p.length?{"X-Inertia-Partial-Data":p.join(",")}:{},...f.length?{"X-Inertia-Partial-Except":f.join(",")}:{},...a&&a.length?{"X-Inertia-Error-Bag":a}:{},...this.page.version?{"X-Inertia-Version":this.page.version}:{}},onUploadProgress:n=>{r instanceof FormData&&(n.percentage=n.progress?Math.round(n.progress*100):0,Y(n),h(n))}}).then(n=>{var j;if(!this.isInertiaResponse(n))return Promise.reject({response:n});let s=n.data;A&&s.component===this.page.component&&(s.props={...this.page.props,...s.props}),o=this.resolvePreserveOption(o,s),c=this.resolvePreserveOption(c,s),c&&((j=window.history.state)!=null&&j.rememberedState)&&s.component===this.page.component&&(s.rememberedState=window.history.state.rememberedState);let w=S,L=b(s.url);return w.hash&&!L.hash&&P(w).href===L.href&&(L.hash=w.hash,s.url=L.href),this.setPage(s,{visitId:F,replace:i,preserveScroll:o,preserveState:c})}).then(()=>{let n=this.page.props.errors||{};if(Object.keys(n).length>0){let s=a?n[a]?n[a]:{}:n;return U(s),R(s)}return G(this.page),C(this.page)}).catch(n=>{if(this.isInertiaResponse(n.response))return this.setPage(n.response.data,{visitId:F});if(this.isLocationVisitResponse(n.response)){let s=b(n.response.headers["x-inertia-location"]),w=S;w.hash&&!s.hash&&P(w).href===s.href&&(s.hash=w.hash),this.locationVisit(s,o===!0)}else if(n.response)Q(n.response)&&ee.show(n.response.data);else return Promise.reject(n)}).then(()=>{this.activeVisit&&this.finishVisit(this.activeVisit)}).catch(n=>{if(!N.isCancel(n)){let s=_(n);if(this.activeVisit&&this.finishVisit(this.activeVisit),s)return Promise.reject(n)}})}setPage(e,{visitId:t=this.createVisitId(),replace:r=!1,preserveScroll:i=!1,preserveState:o=!1}={}){return Promise.resolve(this.resolveComponent(e.component)).then(c=>{t===this.visitId&&(e.scrollRegions=this.page.scrollRegions||[],e.rememberedState=e.rememberedState||{},r=r||b(e.url).href===window.location.href,r?this.replaceState(e):this.pushState(e),this.swapComponent({component:c,page:e,preserveState:o}).then(()=>{i?this.restoreScrollPositions():this.resetScrollPositions(),r||x(e)}))})}pushState(e){this.page=e,B?setTimeout(()=>window.history.pushState(e,"",e.url)):window.history.pushState(e,"",e.url)}replaceState(e){this.page=e,B?setTimeout(()=>window.history.replaceState(e,"",e.url)):window.history.replaceState(e,"",e.url)}handlePopstateEvent(e){if(e.state!==null){let t=e.state,r=this.createVisitId();Promise.resolve(this.resolveComponent(t.component)).then(i=>{r===this.visitId&&(this.page=t,this.swapComponent({component:i,page:t,preserveState:!1}).then(()=>{this.restoreScrollPositions(),x(t)}))})}else{let t=b(this.page.url);t.hash=window.location.hash,this.replaceState({...this.page,url:t.href}),this.resetScrollPositions()}}get(e,t={},r={}){return this.visit(e,{...r,method:"get",data:t})}reload(e={}){return this.visit(window.location.href,{...e,preserveScroll:!0,preserveState:!0})}replace(e,t={}){return console.warn(`Inertia.replace() has been deprecated and will be removed in a future release. Please use Inertia.${t.method??"get"}() instead.`),this.visit(e,{preserveState:!0,...t,replace:!0})}post(e,t={},r={}){return this.visit(e,{preserveState:!0,...r,method:"post",data:t})}put(e,t={},r={}){return this.visit(e,{preserveState:!0,...r,method:"put",data:t})}patch(e,t={},r={}){return this.visit(e,{preserveState:!0,...r,method:"patch",data:t})}delete(e,t={}){return this.visit(e,{preserveState:!0,...t,method:"delete"})}remember(e,t="default"){var r;k||this.replaceState({...this.page,rememberedState:{...(r=this.page)==null?void 0:r.rememberedState,[t]:e}})}restore(e="default"){var t,r;if(!k)return(r=(t=window.history.state)==null?void 0:t.rememberedState)==null?void 0:r[e]}on(e,t){if(k)return()=>{};let r=i=>{let o=t(i);i.cancelable&&!i.defaultPrevented&&o===!1&&i.preventDefault()};return document.addEventListener(`inertia:${e}`,r),()=>document.removeEventListener(`inertia:${e}`,r)}},ie={buildDOMElement(e){let t=document.createElement("template");t.innerHTML=e;let r=t.content.firstChild;if(!e.startsWith("<script "))return r;let i=document.createElement("script");return i.innerHTML=r.innerHTML,r.getAttributeNames().forEach(o=>{i.setAttribute(o,r.getAttribute(o)||"")}),i},isInertiaManagedElement(e){return e.nodeType===Node.ELEMENT_NODE&&e.getAttribute("inertia")!==null},findMatchingElementIndex(e,t){let r=e.getAttribute("inertia");return r!==null?t.findIndex(i=>i.getAttribute("inertia")===r):-1},update:q(function(e){let t=e.map(r=>this.buildDOMElement(r));Array.from(document.head.childNodes).filter(r=>this.isInertiaManagedElement(r)).forEach(r=>{var c,p;let i=this.findMatchingElementIndex(r,t);if(i===-1){(c=r==null?void 0:r.parentNode)==null||c.removeChild(r);return}let o=t.splice(i,1)[0];o&&!r.isEqualNode(o)&&((p=r==null?void 0:r.parentNode)==null||p.replaceChild(o,r))}),t.forEach(r=>document.head.appendChild(r))},1)};function he(e,t,r){let i={},o=0;function c(){let l=o+=1;return i[l]=[],l.toString()}function p(l){l===null||Object.keys(i).indexOf(l)===-1||(delete i[l],a())}function f(l,g=[]){l!==null&&Object.keys(i).indexOf(l)>-1&&(i[l]=g),a()}function v(){let l=t(""),g={...l?{title:`<title inertia="">${l}</title>`}:{}},V=Object.values(i).reduce((d,h)=>d.concat(h),[]).reduce((d,h)=>{if(h.indexOf("<")===-1)return d;if(h.indexOf("<title ")===0){let y=h.match(/(<title [^>]+>)(.*?)(<\/title>)/);return d.title=y?`${y[1]}${t(y[2])}${y[3]}`:h,d}let I=h.match(/ inertia="[^"]+"/);return I?d[I[0]]=h:d[Object.keys(d).length]=h,d},g);return Object.values(V)}function a(){e?r(v()):ie.update(v())}return a(),{forceUpdate:a,createProvider:function(){let l=c();return{update:g=>f(l,g),disconnect:()=>p(l)}}}}var z=null;function ne(e){document.addEventListener("inertia:start",se.bind(null,e)),document.addEventListener("inertia:progress",oe),document.addEventListener("inertia:finish",ae)}function se(e){z=setTimeout(()=>u.start(),e)}function oe(e){var t;u.isStarted()&&((t=e.detail.progress)!=null&&t.percentage)&&u.set(Math.max(u.status,e.detail.progress.percentage/100*.9))}function ae(e){if(clearTimeout(z),u.isStarted())e.detail.visit.completed?u.done():e.detail.visit.interrupted?u.set(0):e.detail.visit.cancelled&&(u.done(),u.remove());else return}function le(e){let t=document.createElement("style");t.type="text/css",t.textContent=`
    #nprogress {
      pointer-events: none;
    }

    #nprogress .bar {
      background: ${e};

      position: fixed;
      z-index: 1031;
      top: 0;
      left: 0;

      width: 100%;
      height: 2px;
    }

    #nprogress .peg {
      display: block;
      position: absolute;
      right: 0px;
      width: 100px;
      height: 100%;
      box-shadow: 0 0 10px ${e}, 0 0 5px ${e};
      opacity: 1.0;

      -webkit-transform: rotate(3deg) translate(0px, -4px);
          -ms-transform: rotate(3deg) translate(0px, -4px);
              transform: rotate(3deg) translate(0px, -4px);
    }

    #nprogress .spinner {
      display: block;
      position: fixed;
      z-index: 1031;
      top: 15px;
      right: 15px;
    }

    #nprogress .spinner-icon {
      width: 18px;
      height: 18px;
      box-sizing: border-box;

      border: solid 2px transparent;
      border-top-color: ${e};
      border-left-color: ${e};
      border-radius: 50%;

      -webkit-animation: nprogress-spinner 400ms linear infinite;
              animation: nprogress-spinner 400ms linear infinite;
    }

    .nprogress-custom-parent {
      overflow: hidden;
      position: relative;
    }

    .nprogress-custom-parent #nprogress .spinner,
    .nprogress-custom-parent #nprogress .bar {
      position: absolute;
    }

    @-webkit-keyframes nprogress-spinner {
      0%   { -webkit-transform: rotate(0deg); }
      100% { -webkit-transform: rotate(360deg); }
    }
    @keyframes nprogress-spinner {
      0%   { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  `,document.head.appendChild(t)}function pe({delay:e=250,color:t="#29d",includeCSS:r=!0,showSpinner:i=!1}={}){ne(e),u.configure({showSpinner:i}),r&&le(t)}function ue(e){let t=e.currentTarget.tagName.toLowerCase()==="a";return!(e.target&&(e==null?void 0:e.target).isContentEditable||e.defaultPrevented||t&&e.altKey||t&&e.ctrlKey||t&&e.metaKey||t&&e.shiftKey||t&&"button"in e&&e.button!==0)}var me=new re;export{te as D,me as N,he as e,pe as i,ue as r};
