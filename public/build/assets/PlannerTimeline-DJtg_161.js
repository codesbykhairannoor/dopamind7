import{E as j,r as y,s as K,N as P,a as n,d as t,e as r,n as x,y as d,F as w,A as k,D as v,q as H,o as l,m as z}from"./vendor-vue-D5HGItUD.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-inertia-Bu-WKz-q.js";import"./vendor-utils-CceizVDj.js";import"./vendor-core-DiSaF3BQ.js";const V={class:"bg-slate-50 rounded-3xl shadow-xl border border-slate-200 overflow-hidden select-none flex flex-col h-full"},q={class:"px-6 py-4 border-b border-slate-200 bg-white sticky top-0 z-50 shadow-sm flex justify-between items-center shrink-0"},U={class:"flex items-center gap-3"},G={class:"font-black text-slate-800 text-base leading-none"},W={class:"relative"},J={class:"text-[10px] font-black text-slate-400 px-2 uppercase tracking-tighter"},Q={class:"bg-white px-2 py-0.5 rounded-md shadow-sm border border-slate-200 flex items-center gap-1"},X={class:"text-xs font-black text-indigo-600 font-mono"},Y={key:0,class:"absolute right-0 top-full mt-2 w-72 bg-white rounded-[1.5rem] shadow-2xl border border-slate-100 p-4 z-[60] animate-in fade-in zoom-in-95 duration-200"},Z={class:"flex justify-between items-center mb-4 px-1"},ee={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest"},te={class:"grid grid-cols-4 gap-2"},oe=["onClick"],se={class:"flex-1 relative w-full bg-white overflow-y-auto overflow-x-hidden custom-scrollbar"},re={class:"w-[80px] shrink-0 border-r border-slate-100 bg-slate-50/40 flex justify-center pt-3"},ne={class:"text-[11px] font-bold text-slate-400 font-mono"},le=["onClick"],ie={class:"absolute inset-x-2 top-0.5 bottom-0.5 rounded border border-transparent group-hover/slot:border-indigo-100 group-hover/slot:bg-indigo-50/30 flex items-center justify-center"},ae={class:"opacity-0 group-hover/slot:opacity-100 text-indigo-400 text-[10px] font-bold tracking-widest"},de={class:"w-[80px] flex justify-end pr-2"},ce={class:"text-[9px] font-black text-white bg-rose-500 px-1.5 rounded-sm shadow-sm"},ue=["onClick"],pe=["title"],xe={key:0,class:"flex items-center justify-between h-full px-2 gap-2"},he={class:"flex items-center gap-1.5 overflow-hidden flex-1 min-w-0"},be={class:"text-xs shrink-0 opacity-80"},ge=["onClick"],me={key:0,class:"w-2.5 h-2.5 stroke-[3]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},fe={key:1,class:"flex flex-col h-full px-3 py-2 gap-1"},ve={class:"flex justify-between items-center shrink-0"},_e={class:"flex items-center gap-2"},ye=["onClick"],we={key:0,class:"w-3 h-3 stroke-[3]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ke={class:"flex items-center gap-2 mt-0.5 min-h-0"},Me={key:0,class:"text-xs opacity-30 text-slate-400"},m=14,h=80,E=80,Ce=2,$e={__name:"PlannerTimeline",props:{scheduledTasks:{type:Array,default:()=>[]},openModal:{type:Function,required:!0},toggleComplete:{type:Function,required:!0},getTypeColor:{type:Function,default:()=>""}},setup(b){const c=y(!1),u=y(6);j(()=>{const s=localStorage.getItem("planner_start_time");s&&(u.value=parseInt(s))}),K(u,s=>localStorage.setItem("planner_start_time",s));const L=H(()=>{const s=[];for(let o=0;o<m;o++){const e=(u.value+o)%24;s.push(`${e.toString().padStart(2,"0")}:00`)}return s}),_=y(new Date);let M;j(()=>{M=setInterval(()=>_.value=new Date,6e4)}),P(()=>clearInterval(M));const i=s=>{switch(parseInt(s)){case 1:return{labelKey:"priority_urgent",card:"bg-rose-50 border-rose-200 hover:border-rose-300",text:"text-rose-900",subtext:"text-rose-500",badge:"bg-rose-100 text-rose-700 border-rose-200",check:"text-rose-300 border-rose-300 hover:bg-rose-100"};case 2:return{labelKey:"priority_work",card:"bg-indigo-50 border-indigo-200 hover:border-indigo-300",text:"text-indigo-900",subtext:"text-indigo-500",badge:"bg-indigo-100 text-indigo-700 border-indigo-200",check:"text-indigo-300 border-indigo-300 hover:bg-indigo-100"};case 3:return{labelKey:"priority_normal",card:"bg-emerald-50 border-emerald-200 hover:border-emerald-300",text:"text-emerald-900",subtext:"text-emerald-500",badge:"bg-emerald-100 text-emerald-700 border-emerald-200",check:"text-emerald-300 border-emerald-300 hover:bg-emerald-100"};default:return{icon:"ðŸ“",labelKey:"label_todo",card:"bg-white border-slate-200 hover:border-slate-300 shadow-sm",text:"text-slate-800",subtext:"text-slate-500",badge:"bg-slate-100 text-slate-700 border-slate-200",check:"text-slate-300 border-slate-300 hover:bg-slate-50"}}},C=s=>`${s.start_time} - ${s.end_time||"??"}`,$=s=>{const[o,e]=s.start_time.split(":").map(Number);let[a,f]=s.end_time?s.end_time.split(":").map(Number):[o+1,e],g=a*60+f-(o*60+e);return g<0&&(g+=1440),g},B=s=>{const[o,e]=s.start_time.split(":").map(Number),a=$(s),f=o*60+e,g=u.value*60;let p=f-g;p<-720?p+=1440:p>720&&(p-=1440);const S=p+a;if(S<=0)return{display:"none"};if(p>=m*60)return{display:"none"};const I=Math.max(0,p),T=Math.min(m*60,S)-I;if(T<=0)return{display:"none"};const N=I/60*h,O=T/60*h,A=Math.max(O-Ce,28);return{top:`${N}px`,height:`${A}px`,left:`${E+8}px`,right:"8px",zIndex:a<30?20:10}},D=s=>$(s)<45?"MICRO":"NORMAL",F=H(()=>{const s=_.value.getHours(),o=_.value.getMinutes();let e=s-u.value;return e<0&&(e+=24),e>=m?{display:"none"}:{top:`${(e*60+o)/60*h}px`,left:`${E}px`,right:"0px"}});return(s,o)=>(l(),n("div",V,[t("div",q,[t("div",U,[o[3]||(o[3]=t("div",{class:"w-10 h-10 rounded-xl bg-indigo-600 text-white flex items-center justify-center text-lg shadow-indigo-200 shadow-lg"},"ðŸ“…",-1)),t("h3",G,r(s.$t("timeline_title")),1)]),t("div",W,[t("button",{onClick:o[0]||(o[0]=e=>c.value=!c.value),class:"flex items-center bg-slate-100 p-1 rounded-lg border border-slate-200 hover:bg-slate-200 transition-all group"},[t("span",J,r(s.$t("label_start")),1),t("div",Q,[t("span",X,r(u.value.toString().padStart(2,"0"))+":00",1),(l(),n("svg",{class:d(["w-3 h-3 text-slate-400 group-hover:text-indigo-500 transition-transform",{"rotate-180":c.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...o[4]||(o[4]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"},null,-1)])],2))])]),c.value?(l(),n("div",Y,[t("div",Z,[t("span",ee,r(s.$t("select_hour")),1),t("button",{onClick:o[1]||(o[1]=e=>c.value=!1),class:"text-slate-300 hover:text-rose-500 transition-colors"},[...o[5]||(o[5]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"3"},[t("path",{d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",te,[(l(),n(w,null,k(24,e=>t("button",{key:e-1,onClick:a=>{u.value=e-1,c.value=!1},class:d(["py-2.5 flex items-center justify-center rounded-xl text-[10px] font-black font-mono transition-all border-2",u.value===e-1?"bg-indigo-600 border-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-slate-50 border-transparent text-slate-500 hover:bg-indigo-50 hover:text-indigo-600 hover:border-indigo-100"])},r((e-1).toString().padStart(2,"0"))+":00 ",11,oe)),64))])])):x("",!0),c.value?(l(),n("div",{key:1,onClick:o[2]||(o[2]=e=>c.value=!1),class:"fixed inset-0 z-50"})):x("",!0)])]),t("div",se,[t("div",{class:"relative w-full",style:v({height:`${m*h}px`})},[(l(!0),n(w,null,k(L.value,(e,a)=>(l(),n("div",{key:e,class:"absolute w-full flex border-b border-slate-100",style:v({top:`${a*h}px`,height:`${h}px`})},[t("div",re,[t("span",ne,r(e),1)]),t("div",{class:"flex-1 relative group/slot cursor-pointer",onClick:f=>b.openModal(null,e)},[t("div",ie,[t("span",ae,"+ "+r(s.$t("btn_add_timeline")),1)])],8,le)],4))),128)),t("div",{class:"absolute z-30 flex items-center pointer-events-none w-full",style:v(F.value)},[t("div",de,[t("span",ce,r(s.$t("label_now")),1)]),o[6]||(o[6]=t("div",{class:"flex-1 h-[2px] bg-rose-500 shadow-[0_0_8px_rgba(244,63,94,0.6)]"},null,-1))],4),(l(!0),n(w,null,k(b.scheduledTasks,e=>(l(),n("div",{key:e.id,onClick:a=>b.openModal(e),style:v(B(e)),class:d(["group absolute rounded-lg border px-0 py-0 shadow-sm cursor-pointer overflow-hidden transition-all hover:shadow-md hover:scale-[1.005]",[i(e.type).card,e.is_completed?"opacity-60 grayscale filter":""]])},[t("div",{class:"w-full h-full relative",title:e.notes?`ðŸ“ ${e.notes}`:""},[D(e)==="MICRO"?(l(),n("div",xe,[t("div",he,[t("span",be,r(i(e.type).icon),1),t("span",{class:d(["font-bold text-xs truncate leading-none",[i(e.type).text,e.is_completed&&"line-through"]])},r(e.title),3),t("span",{class:d(["text-[10px] font-mono opacity-60 whitespace-nowrap shrink-0",i(e.type).subtext])}," ("+r(C(e))+") ",3)]),t("button",{onClick:z(a=>b.toggleComplete(e),["stop"]),class:d(["w-4 h-4 rounded border flex items-center justify-center shrink-0 transition-colors bg-white hover:scale-110",e.is_completed?"bg-emerald-500 border-emerald-500 text-white":i(e.type).check])},[e.is_completed?(l(),n("svg",me,[...o[7]||(o[7]=[t("path",{d:"M5 13l4 4L19 7"},null,-1)])])):x("",!0)],10,ge)])):(l(),n("div",fe,[t("div",ve,[t("div",_e,[t("span",{class:d(["text-[10px] font-bold uppercase tracking-wider px-1.5 py-0.5 rounded border flex items-center gap-1 shadow-sm opacity-90",i(e.type).badge])},r(i(e.type).icon)+" "+r(s.$t(i(e.type).labelKey)),3),t("span",{class:d(["text-[10px] font-mono font-bold opacity-60",i(e.type).text])},r(C(e)),3)]),t("button",{onClick:z(a=>b.toggleComplete(e),["stop"]),class:d(["w-5 h-5 rounded border bg-white flex items-center justify-center hover:scale-110 transition-transform shrink-0 shadow-sm",e.is_completed?"bg-emerald-500 border-emerald-500 text-white":i(e.type).check])},[e.is_completed?(l(),n("svg",we,[...o[8]||(o[8]=[t("path",{d:"M5 13l4 4L19 7"},null,-1)])])):x("",!0)],10,ye)]),t("div",ke,[t("h4",{class:d(["font-black text-sm leading-tight truncate shrink-0 max-w-[50%]",[i(e.type).text,e.is_completed&&"line-through opacity-50"]])},r(e.title),3),e.notes?(l(),n("span",Me,"|")):x("",!0),e.notes?(l(),n("div",{key:1,class:d(["truncate text-xs italic opacity-70 flex-1",i(e.type).text])},r(e.notes),3)):x("",!0)])]))],8,pe)],14,ue))),128))],4)])]))}},Ee=R($e,[["__scopeId","data-v-dcb32fcc"]]);export{Ee as default};
