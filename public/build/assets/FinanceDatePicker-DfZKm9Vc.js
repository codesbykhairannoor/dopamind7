import{z as i,a1 as $,y as j,A as E,d as s,q as p,f as l,p as v,g,x as c,F as x,E as Y,o,u as K,C as L}from"./vendor-BNleA0cf.js";import{u as T}from"./useFinanceFormat-B8cI5cQH.js";const A={key:0,class:"w-full sm:w-[320px]"},I={class:"relative z-50 bg-white rounded-3xl shadow-xl border border-slate-100 p-5 animate-in fade-in zoom-in-95 duration-200"},J={class:"flex items-center justify-between mb-4"},N={class:"font-bold text-slate-700 capitalize"},O={class:"grid grid-cols-7 mb-2 text-center"},R={class:"grid grid-cols-7 gap-1"},q=["onClick","title"],H={class:"text-sm font-bold leading-none"},P={key:0,class:"mt-1 flex gap-0.5"},W={key:0,class:"w-1.5 h-1.5 rounded-full bg-emerald-400 shadow-sm"},G={key:1,class:"w-1.5 h-1.5 rounded-full bg-rose-400 shadow-sm"},Q={key:2,class:"w-1.5 h-1.5 rounded-full bg-slate-300"},U={key:1,class:"absolute -top-1 -right-1 flex h-2 w-2"},ee={__name:"FinanceDatePicker",props:{modelValue:String,transactions:{type:Array,default:()=>[]},show:Boolean,close:Function},emits:["update:modelValue","close"],setup(b,{emit:k}){i.extend($);const u=b,m=k,{appLocale:f,formatMoney:w}=T(),M=c(()=>!f||!f.value?"id":f.value.split("-")[0]),D=c(()=>{const t={};return u.transactions.forEach(a=>{const e=i(a.date).format("YYYY-MM-DD");t[e]||(t[e]={income:0,expense:0,net:0,count:0});const d=Number(a.amount);a.type==="income"?(t[e].income+=d,t[e].net+=d):(t[e].expense+=d,t[e].net-=d),t[e].count++}),t}),r=t=>{const a=n.value.date(t).format("YYYY-MM-DD");return D.value[a]},y=c(()=>{try{const t=i().locale(M.value);return typeof t.localeData!="function"?["Min","Sen","Sel","Rab","Kam","Jum","Sab"]:t.localeData().weekdaysShort()}catch{return["Min","Sen","Sel","Rab","Kam","Jum","Sab"]}}),n=j(i(u.modelValue||void 0));E(()=>u.modelValue,t=>{t&&(n.value=i(t))});const S=c(()=>n.value.daysInMonth()),C=c(()=>n.value.startOf("month").day()),V=c(()=>{try{return n.value.locale(M.value).format("MMMM YYYY")}catch{return n.value.format("MMMM YYYY")}}),z=()=>n.value=n.value.subtract(1,"month"),F=()=>n.value=n.value.add(1,"month"),B=t=>{const a=n.value.date(t).format("YYYY-MM-DD");m("update:modelValue",a),m("close")},h=t=>u.modelValue?u.modelValue===n.value.date(t).format("YYYY-MM-DD"):!1,_=t=>i().format("YYYY-MM-DD")===n.value.date(t).format("YYYY-MM-DD");return(t,a)=>b.show?(o(),s("div",A,[l("div",{class:"fixed inset-0 z-40",onClick:a[0]||(a[0]=e=>m("close"))}),l("div",I,[l("div",J,[l("button",{onClick:v(z,["prevent"]),class:"p-2 rounded-xl hover:bg-slate-50 text-slate-400 hover:text-indigo-600 transition"},"â—€"),l("h4",N,g(V.value),1),l("button",{onClick:v(F,["prevent"]),class:"p-2 rounded-xl hover:bg-slate-50 text-slate-400 hover:text-indigo-600 transition"},"â–¶")]),l("div",O,[(o(!0),s(x,null,Y(y.value,e=>(o(),s("span",{key:e,class:"text-[10px] font-bold text-slate-400 uppercase"},g(e),1))),128))]),l("div",R,[(o(!0),s(x,null,Y(C.value,e=>(o(),s("div",{key:"blank-"+e}))),128)),(o(!0),s(x,null,Y(S.value,e=>(o(),s("button",{key:e,onClick:v(d=>B(e),["prevent"]),class:L(["h-9 w-9 rounded-xl flex flex-col items-center justify-center transition-all relative group",[h(e)?"bg-indigo-600 text-white shadow-lg shadow-indigo-200":"text-slate-600 hover:bg-slate-50 hover:text-indigo-600",_(e)&&!h(e)?"ring-1 ring-indigo-200 bg-indigo-50/50":""]]),title:r(e)?`${K(w)(r(e).net)} (${r(e).count} Trx)`:"Tidak ada transaksi"},[l("span",H,g(e),1),r(e)?(o(),s("div",P,[r(e).net>0?(o(),s("span",W)):r(e).net<0?(o(),s("span",G)):(o(),s("span",Q))])):p("",!0),_(e)&&!h(e)?(o(),s("span",U,[...a[1]||(a[1]=[l("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75"},null,-1),l("span",{class:"relative inline-flex rounded-full h-2 w-2 bg-indigo-500"},null,-1)])])):p("",!0)],10,q))),128))])])])):p("",!0)}};export{ee as default};
