import{k as M,w as g,d as e,a as c,m as k,o as r,e as n,x as m,b as p,r as T,p as h,y as E,f as u,F as $,z as C,n as R,G as S}from"./vendor-vue-BnW7Nrl4.js";import{d as I}from"./vendor-core-CzOEOszY.js";import{_ as N}from"./Modal-DJaFAnPu.js";import{_ as U}from"./TextInput-BVYhg6rt.js";import{P as z}from"./PrimaryButton-ElD7YGox.js";import{_ as P}from"./SecondaryButton-CoYwdmRS.js";import{u as L}from"./useFinanceFormat-BzdLqOPi.js";import Y from"./FinanceDatePicker--Rd7IAaB.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-inertia-DLGDmWoM.js";import"./vendor-utils-vWQA-h1x.js";const K={class:"bg-white rounded-[2.5rem] flex flex-col max-h-[90vh] relative overflow-visible transition-all duration-300 border border-slate-100 shadow-2xl"},G={key:0,class:"absolute top-0 left-0 right-0 bg-rose-500 text-white text-[10px] font-black px-6 py-3.5 text-center animate-in slide-in-from-top-full z-50 shadow-lg flex items-center justify-center gap-2 uppercase tracking-[0.1em] rounded-t-[2.5rem]"},O={class:"flex items-center gap-4"},H={class:"text-xl font-black text-slate-800 tracking-tight leading-none mb-1.5"},J={class:"relative"},W={key:0,class:"absolute top-full left-0 mt-2 z-[100] shadow-2xl rounded-3xl"},q={class:"flex items-center gap-3"},Q={class:"flex-1 overflow-y-auto custom-scrollbar bg-slate-50/30 p-4 md:p-8"},X={class:"hidden md:grid grid-cols-12 gap-2 mb-4 px-1 text-[9px] font-black text-slate-400 uppercase tracking-[0.2em]"},Z={class:"col-span-2 text-center"},ee={class:"col-span-3 ml-1"},te={class:"col-span-4 ml-1"},oe={class:"col-span-2"},se={class:"space-y-4 md:space-y-3 mt-2"},ae={class:"grid grid-cols-12 gap-3 md:gap-2 items-center"},ne={class:"col-span-12 md:col-span-2"},le={class:"md:hidden text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1 block"},re={class:"flex bg-slate-100 p-1 rounded-[0.8rem] h-11"},ie=["onClick"],de=["onClick"],ce={class:"col-span-12 md:col-span-3"},me={class:"md:hidden text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1 block"},ue={class:"relative"},pe=["onUpdate:modelValue"],fe={value:"",disabled:""},ge=["value"],be={class:"col-span-12 md:col-span-4"},he={class:"md:hidden text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1 block"},xe={class:"col-span-10 md:col-span-2"},ve={class:"md:hidden text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1 block"},we={class:"relative group"},ye={class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 font-bold text-[10px]"},ke=["value","onInput"],$e={class:"col-span-2 md:col-span-1 flex justify-center items-end md:items-center h-11 md:h-auto"},Ce=["onClick","disabled"],Be={class:"px-8 py-5 bg-white border-t border-slate-50 flex flex-col sm:flex-row justify-between items-center gap-4 shrink-0 rounded-b-[2.5rem]"},Ve={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest flex items-center gap-2"},je={class:"text-indigo-600 text-sm font-black"},De={class:"flex gap-3 w-full sm:w-auto"},_e={key:0},Fe={key:1},Me={__name:"FinanceBatchModal",props:{show:Boolean,form:Object,categories:Array,budgets:Array,conflictError:String,close:Function,submit:Function,addRow:Function,removeRow:Function,switchToSingle:Function},setup(s){const i=s,{activeCurrency:b,getCategoryDetails:B,appLocale:x}=L(),f=T(!1),v=h(()=>["IDR","EUR","de-DE"].includes(b.value)),V=h(()=>({IDR:"Rp",USD:"$",GBP:"Â£",EUR:"â‚¬",JPY:"Â¥"})[b.value]||b.value),j=h(()=>{if(!i.form.date)return"";const o=x.value?x.value.split("-")[0]:"id";return I(i.form.date).locale(o).format("dddd, DD MMM YYYY")}),D=o=>{if(!o)return"";const t=o.toString();return v.value?t.replace(/\B(?=(\d{3})+(?!\d))/g,"."):t.replace(/\B(?=(\d{3})+(?!\d))/g,",")},_=(o,t)=>{let a=v.value?o.target.value.replace(/\./g,""):o.target.value.replace(/,/g,"");isNaN(a)||(i.form.transactions[t].amount=a)},F=o=>o==="income"?i.categories.filter(t=>t.type==="income").map(t=>t.slug):i.budgets.map(t=>t.category),w=o=>B(o,i.categories),y=(o,t)=>{i.form.transactions[o].type=t,i.form.transactions[o].category=""};return(o,t)=>(r(),M(N,{show:s.show,onClose:s.close,maxWidth:"2xl"},{default:g(()=>[e("div",K,[s.conflictError?(r(),c("div",G,[t[6]||(t[6]=e("svg",{class:"w-4 h-4 shrink-0 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"3"},[e("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e("span",null,n(s.conflictError),1)])):k("",!0),e("div",{class:m(["px-8 py-6 border-b border-slate-50 flex justify-between items-center bg-white shrink-0 z-20 rounded-t-[2.5rem]",{"mt-12":s.conflictError}])},[e("div",O,[t[8]||(t[8]=e("div",{class:"w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center text-xl text-white shadow-lg shadow-indigo-100"}," âœ¨ ",-1)),e("div",null,[e("h2",H,n(o.$t("batch_mode_title","Batch Finance")),1),e("div",J,[e("button",{type:"button",onClick:t[0]||(t[0]=a=>f.value=!f.value),class:"text-[10px] font-black text-indigo-700 bg-indigo-50 hover:bg-indigo-100 border border-indigo-100 rounded-lg px-2.5 py-1 transition-all uppercase tracking-widest flex items-center gap-2"},[e("span",null,n(j.value),1),t[7]||(t[7]=e("span",null,"ðŸ“…",-1))]),p(E,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:g(()=>[f.value?(r(),c("div",W,[p(Y,{show:!0,modelValue:s.form.date,"onUpdate:modelValue":t[1]||(t[1]=a=>s.form.date=a),onClose:t[2]||(t[2]=a=>f.value=!1)},null,8,["modelValue"])])):k("",!0)]),_:1})])])]),e("div",q,[e("button",{onClick:t[3]||(t[3]=(...a)=>s.switchToSingle&&s.switchToSingle(...a)),type:"button",class:"hidden sm:flex text-[10px] font-black uppercase tracking-widest px-4 py-2 rounded-xl border-2 border-slate-50 text-slate-400 hover:bg-indigo-50 hover:text-indigo-600 hover:border-indigo-100 transition-all active:scale-95 items-center gap-2"},[t[9]||(t[9]=e("span",null,"â†©ï¸",-1)),u(" "+n(o.$t("btn_single_mode","Single Mode")),1)]),e("button",{onClick:t[4]||(t[4]=(...a)=>s.close&&s.close(...a)),class:"w-10 h-10 rounded-xl bg-slate-50 text-slate-400 hover:bg-rose-50 hover:text-rose-500 transition-all active:scale-90 flex items-center justify-center font-bold"}," âœ• ")])],2),e("div",Q,[e("div",X,[e("div",Z,n(o.$t("type","Tipe")),1),e("div",ee,[u(n(o.$t("category","Kategori"))+" ",1),t[10]||(t[10]=e("span",{class:"text-rose-500"},"*",-1))]),e("div",te,[u(n(o.$t("description","Keterangan"))+" ",1),t[11]||(t[11]=e("span",{class:"text-rose-500"},"*",-1))]),e("div",oe,[u(n(o.$t("amount","Nominal"))+" ",1),t[12]||(t[12]=e("span",{class:"text-rose-500"},"*",-1))]),t[13]||(t[13]=e("div",{class:"col-span-1"},null,-1))]),e("div",se,[(r(!0),c($,null,C(s.form.transactions,(a,d)=>(r(),c("div",{key:d,class:"bg-white md:bg-transparent p-5 md:p-0 rounded-[2rem] md:rounded-none border border-slate-100 md:border-none shadow-sm md:shadow-none animate-in fade-in slide-in-from-bottom-4 duration-300 group"},[e("div",ae,[e("div",ne,[e("label",le,n(o.$t("type","Tipe")),1),e("div",re,[e("button",{type:"button",onClick:l=>y(d,"expense"),class:m(["flex-1 rounded-lg text-[10px] font-black transition-all flex items-center justify-center tracking-wider uppercase",a.type==="expense"?"bg-white text-rose-600 shadow-sm":"text-slate-400 hover:text-slate-600"])}," Out ",10,ie),e("button",{type:"button",onClick:l=>y(d,"income"),class:m(["flex-1 rounded-lg text-[10px] font-black transition-all flex items-center justify-center tracking-wider uppercase",a.type==="income"?"bg-white text-emerald-600 shadow-sm":"text-slate-400 hover:text-slate-600"])}," In ",10,de)])]),e("div",ce,[e("label",me,n(o.$t("category","Kategori")),1),e("div",ue,[R(e("select",{"onUpdate:modelValue":l=>a.category=l,class:m(["w-full pl-3 pr-8 h-11 !rounded-[0.8rem] border-2 border-slate-200 focus:border-indigo-500 bg-white font-bold text-slate-700 capitalize text-xs appearance-none cursor-pointer transition-all",{"!border-rose-300 !bg-rose-50":s.form.errors[`transactions.${d}.category`]}])},[e("option",fe,n(o.$t("select_placeholder","Pilih...")),1),(r(!0),c($,null,C(F(a.type),l=>(r(),c("option",{key:l,value:l},n(w(l).icon)+" "+n(w(l).name),9,ge))),128))],10,pe),[[S,a.category]]),t[14]||(t[14]=e("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400"},[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"3"},[e("path",{d:"M19 9l-7 7-7-7"})])],-1))])]),e("div",be,[e("label",he,n(o.$t("description","Keterangan")),1),p(U,{modelValue:a.title,"onUpdate:modelValue":l=>a.title=l,placeholder:o.$t("desc_placeholder","Makan, Gaji..."),class:m(["w-full text-xs font-bold h-11 px-3 !rounded-[0.8rem] border-2 border-slate-200 focus:border-indigo-500 focus:ring-0 transition-all bg-white",{"!border-rose-300 !bg-rose-50":s.form.errors[`transactions.${d}.title`]}])},null,8,["modelValue","onUpdate:modelValue","placeholder","class"])]),e("div",xe,[e("label",ve,n(o.$t("amount","Nominal")),1),e("div",we,[e("span",ye,n(V.value),1),e("input",{type:"text",value:D(a.amount),onInput:l=>_(l,d),placeholder:"0",class:m(["w-full h-11 pl-8 pr-2 !rounded-[0.8rem] border-2 border-slate-200 focus:border-indigo-500 font-black text-xs text-slate-700 transition-all focus:ring-0 bg-white",{"!border-rose-300 !bg-rose-50":s.form.errors[`transactions.${d}.amount`]}])},null,42,ke)])]),e("div",$e,[e("button",{onClick:l=>s.removeRow(d),type:"button",class:m(["w-full h-11 md:w-8 md:h-8 rounded-xl flex items-center justify-center text-slate-300 hover:text-rose-500 hover:bg-rose-50 transition-all active:scale-90",{"opacity-0 pointer-events-none":s.form.transactions.length<=1}]),disabled:s.form.transactions.length<=1},[...t[15]||(t[15]=[e("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"2.5"},[e("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],10,Ce)])])]))),128))]),e("button",{onClick:t[5]||(t[5]=(...a)=>s.addRow&&s.addRow(...a)),type:"button",class:"mt-8 w-full py-3.5 border-2 border-dashed border-slate-200 rounded-2xl text-slate-400 font-black uppercase tracking-widest text-[10px] hover:border-indigo-400 hover:text-indigo-600 hover:bg-white transition-all flex items-center justify-center gap-3 group active:scale-95 shadow-sm"},[t[16]||(t[16]=e("span",{class:"w-5 h-5 rounded-md bg-slate-100 text-slate-400 flex items-center justify-center text-xs group-hover:bg-indigo-600 group-hover:text-white transition-all shadow-sm"},"+",-1)),u(" "+n(o.$t("btn_add_another","Tambah Baris")),1)])]),e("div",Be,[e("div",Ve,[t[17]||(t[17]=e("span",{class:"w-2 h-2 rounded-full bg-indigo-500"},null,-1)),u(" "+n(o.$t("total_label","Total Input:"))+" ",1),e("span",je,n(s.form.transactions.length),1)]),e("div",De,[p(P,{onClick:s.close,class:"flex-1 sm:flex-none !py-3 !rounded-xl !text-[10px] !font-black !uppercase !tracking-widest !border-2 !text-slate-400 hover:!text-slate-600"},{default:g(()=>[u(n(o.$t("btn_cancel","Batal")),1)]),_:1},8,["onClick"]),p(z,{onClick:s.submit,disabled:s.form.processing||s.conflictError,class:m(["flex-[2] sm:flex-none !bg-indigo-600 hover:!bg-indigo-700 !rounded-xl !py-3 !px-8 shadow-xl shadow-indigo-100 transition-all transform active:scale-95 font-black uppercase tracking-widest text-[10px]",{"!bg-slate-300 !text-slate-500 !cursor-not-allowed !shadow-none !transform-none":s.conflictError}])},{default:g(()=>[s.form.processing?(r(),c("span",_e,"...")):(r(),c("span",Fe,n(o.$t("btn_save_all","Simpan Batch")),1))]),_:1},8,["onClick","disabled","class"])])])])]),_:1},8,["show","onClose"]))}},Ae=A(Me,[["__scopeId","data-v-c6c57530"]]);export{Ae as default};
